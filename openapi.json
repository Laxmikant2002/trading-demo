{
  "openapi": "3.0.3",
  "info": {
    "title": "XPro Trading Platform API",
    "description": "A comprehensive REST API for the XPro Trading Platform with real-time capabilities, portfolio management, and market data integration.",
    "version": "1.0.0",
    "contact": {
      "name": "XPro Trading Support",
      "email": "support@xprotrading.com"
    },
    "license": {
      "name": "MIT",
      "url": "https://opensource.org/licenses/MIT"
    }
  },
  "servers": [
    {
      "url": "http://localhost:3000/api",
      "description": "Development server"
    },
    {
      "url": "https://api.xprotrading.com",
      "description": "Production server"
    }
  ],
  "security": [
    {
      "bearerAuth": []
    }
  ],
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT",
        "description": "JWT Authorization header using the Bearer scheme. Example: 'Authorization: Bearer {token}'"
      }
    },
    "schemas": {
      "Error": {
        "type": "object",
        "properties": {
          "error": {
            "type": "string",
            "description": "Error message"
          }
        },
        "required": ["error"]
      },
      "User": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "description": "User ID"
          },
          "email": {
            "type": "string",
            "format": "email",
            "description": "User email address"
          },
          "firstName": {
            "type": "string",
            "description": "User's first name"
          },
          "lastName": {
            "type": "string",
            "description": "User's last name"
          },
          "isActive": {
            "type": "boolean",
            "description": "Whether the user account is active"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "Account creation timestamp"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time",
            "description": "Account last update timestamp"
          }
        },
        "required": ["id", "email", "firstName", "lastName"]
      },
      "AuthTokens": {
        "type": "object",
        "properties": {
          "accessToken": {
            "type": "string",
            "description": "JWT access token"
          },
          "refreshToken": {
            "type": "string",
            "description": "JWT refresh token"
          },
          "expiresIn": {
            "type": "integer",
            "description": "Token expiration time in seconds"
          }
        },
        "required": ["accessToken", "refreshToken"]
      },
      "RegisterRequest": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "description": "User email address"
          },
          "password": {
            "type": "string",
            "minLength": 8,
            "description": "User password (minimum 8 characters)"
          },
          "firstName": {
            "type": "string",
            "description": "User's first name"
          },
          "lastName": {
            "type": "string",
            "description": "User's last name"
          }
        },
        "required": ["email", "password", "firstName", "lastName"]
      },
      "LoginRequest": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string",
            "format": "email",
            "description": "User email address"
          },
          "password": {
            "type": "string",
            "description": "User password"
          }
        },
        "required": ["email", "password"]
      },
      "LoginResponse": {
        "type": "object",
        "properties": {
          "message": {
            "type": "string",
            "example": "Login successful"
          },
          "user": {
            "$ref": "#/components/schemas/User"
          },
          "accessToken": {
            "type": "string",
            "description": "JWT access token"
          },
          "refreshToken": {
            "type": "string",
            "description": "JWT refresh token"
          },
          "expiresIn": {
            "type": "integer",
            "description": "Token expiration time in seconds",
            "example": 3600
          }
        }
      },
      "RefreshTokenRequest": {
        "type": "object",
        "properties": {
          "refreshToken": {
            "type": "string",
            "description": "JWT refresh token"
          }
        },
        "required": ["refreshToken"]
      },
      "ChangePasswordRequest": {
        "type": "object",
        "properties": {
          "currentPassword": {
            "type": "string",
            "description": "Current password"
          },
          "newPassword": {
            "type": "string",
            "minLength": 8,
            "description": "New password (minimum 8 characters)"
          }
        },
        "required": ["currentPassword", "newPassword"]
      },
      "MarketOrderRequest": {
        "type": "object",
        "properties": {
          "symbol": {
            "type": "string",
            "description": "Trading symbol (e.g., AAPL, BTC/USD)",
            "example": "AAPL"
          },
          "side": {
            "type": "string",
            "enum": ["buy", "sell"],
            "description": "Order side"
          },
          "quantity": {
            "type": "number",
            "minimum": 0.01,
            "description": "Order quantity"
          }
        },
        "required": ["symbol", "side", "quantity"]
      },
      "LimitOrderRequest": {
        "type": "object",
        "properties": {
          "symbol": {
            "type": "string",
            "description": "Trading symbol (e.g., AAPL, BTC/USD)",
            "example": "AAPL"
          },
          "side": {
            "type": "string",
            "enum": ["buy", "sell"],
            "description": "Order side"
          },
          "quantity": {
            "type": "number",
            "minimum": 0.01,
            "description": "Order quantity"
          },
          "limitPrice": {
            "type": "number",
            "minimum": 0.01,
            "description": "Limit price for the order"
          }
        },
        "required": ["symbol", "side", "quantity", "limitPrice"]
      },
      "StopLossRequest": {
        "type": "object",
        "properties": {
          "orderId": {
            "type": "string",
            "description": "Order ID to attach stop loss to"
          },
          "stopPrice": {
            "type": "number",
            "minimum": 0.01,
            "description": "Stop loss price"
          }
        },
        "required": ["orderId", "stopPrice"]
      },
      "TakeProfitRequest": {
        "type": "object",
        "properties": {
          "orderId": {
            "type": "string",
            "description": "Order ID to attach take profit to"
          },
          "takeProfitPrice": {
            "type": "number",
            "minimum": 0.01,
            "description": "Take profit price"
          }
        },
        "required": ["orderId", "takeProfitPrice"]
      },
      "Order": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string",
            "description": "Order ID"
          },
          "symbol": {
            "type": "string",
            "description": "Trading symbol"
          },
          "type": {
            "type": "string",
            "enum": ["market", "limit", "stop-loss", "take-profit"],
            "description": "Order type"
          },
          "side": {
            "type": "string",
            "enum": ["buy", "sell"],
            "description": "Order side"
          },
          "quantity": {
            "type": "number",
            "description": "Order quantity"
          },
          "price": {
            "type": "number",
            "description": "Order price"
          },
          "status": {
            "type": "string",
            "enum": ["pending", "filled", "cancelled", "rejected"],
            "description": "Order status"
          },
          "createdAt": {
            "type": "string",
            "format": "date-time",
            "description": "Order creation timestamp"
          },
          "updatedAt": {
            "type": "string",
            "format": "date-time",
            "description": "Order last update timestamp"
          }
        },
        "required": ["id", "symbol", "type", "side", "quantity", "status"]
      },
      "Position": {
        "type": "object",
        "properties": {
          "symbol": {
            "type": "string",
            "description": "Trading symbol"
          },
          "quantity": {
            "type": "number",
            "description": "Position quantity"
          },
          "averagePrice": {
            "type": "number",
            "description": "Average entry price"
          },
          "currentPrice": {
            "type": "number",
            "description": "Current market price"
          },
          "unrealizedPnL": {
            "type": "number",
            "description": "Unrealized profit/loss"
          },
          "pnlPercentage": {
            "type": "number",
            "description": "Profit/loss percentage"
          }
        },
        "required": ["symbol", "quantity", "averagePrice", "currentPrice"]
      },
      "Portfolio": {
        "type": "object",
        "properties": {
          "totalValue": {
            "type": "number",
            "description": "Total portfolio value"
          },
          "cashBalance": {
            "type": "number",
            "description": "Available cash balance"
          },
          "positions": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Position"
            },
            "description": "Current positions"
          },
          "totalPnL": {
            "type": "number",
            "description": "Total profit/loss"
          },
          "pnlPercentage": {
            "type": "number",
            "description": "Total profit/loss percentage"
          }
        },
        "required": ["totalValue", "cashBalance", "positions"]
      },
      "PortfolioOverview": {
        "type": "object",
        "properties": {
          "totalValue": {
            "type": "number",
            "description": "Total portfolio value"
          },
          "cashBalance": {
            "type": "number",
            "description": "Available cash balance"
          },
          "investedValue": {
            "type": "number",
            "description": "Value invested in positions"
          },
          "totalPnL": {
            "type": "number",
            "description": "Total profit/loss"
          },
          "pnlPercentage": {
            "type": "number",
            "description": "Total profit/loss percentage"
          },
          "topPerformers": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Position"
            },
            "description": "Top performing positions"
          },
          "worstPerformers": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Position"
            },
            "description": "Worst performing positions"
          }
        }
      },
      "MarketData": {
        "type": "object",
        "properties": {
          "symbol": {
            "type": "string",
            "description": "Trading symbol"
          },
          "price": {
            "type": "number",
            "description": "Current price"
          },
          "change": {
            "type": "number",
            "description": "Price change"
          },
          "changePercent": {
            "type": "number",
            "description": "Price change percentage"
          },
          "volume": {
            "type": "number",
            "description": "Trading volume"
          },
          "high": {
            "type": "number",
            "description": "Day high price"
          },
          "low": {
            "type": "number",
            "description": "Day low price"
          },
          "open": {
            "type": "number",
            "description": "Day open price"
          },
          "close": {
            "type": "number",
            "description": "Previous close price"
          },
          "timestamp": {
            "type": "string",
            "format": "date-time",
            "description": "Data timestamp"
          }
        },
        "required": ["symbol", "price", "timestamp"]
      },
      "HistoricalData": {
        "type": "array",
        "items": {
          "$ref": "#/components/schemas/MarketData"
        }
      },
      "AdminUser": {
        "allOf": [
          {
            "$ref": "#/components/schemas/User"
          },
          {
            "type": "object",
            "properties": {
              "balance": {
                "type": "number",
                "description": "User account balance"
              },
              "lastLogin": {
                "type": "string",
                "format": "date-time",
                "description": "Last login timestamp"
              },
              "totalTrades": {
                "type": "integer",
                "description": "Total number of trades"
              }
            }
          }
        ]
      },
      "TradableAsset": {
        "type": "object",
        "properties": {
          "symbol": {
            "type": "string",
            "description": "Asset symbol"
          },
          "name": {
            "type": "string",
            "description": "Asset name"
          },
          "type": {
            "type": "string",
            "enum": ["stock", "crypto", "forex", "commodity"],
            "description": "Asset type"
          },
          "isActive": {
            "type": "boolean",
            "description": "Whether the asset is tradable"
          },
          "minOrderSize": {
            "type": "number",
            "description": "Minimum order size"
          },
          "maxOrderSize": {
            "type": "number",
            "description": "Maximum order size"
          }
        },
        "required": ["symbol", "name", "type"]
      },
      "SystemMetrics": {
        "type": "object",
        "properties": {
          "totalUsers": {
            "type": "integer",
            "description": "Total number of users"
          },
          "activeUsers": {
            "type": "integer",
            "description": "Number of active users"
          },
          "totalTrades": {
            "type": "integer",
            "description": "Total number of trades executed"
          },
          "systemUptime": {
            "type": "number",
            "description": "System uptime in seconds"
          },
          "memoryUsage": {
            "type": "number",
            "description": "Memory usage percentage"
          },
          "cpuUsage": {
            "type": "number",
            "description": "CPU usage percentage"
          }
        }
      },
      "UsageStats": {
        "type": "object",
        "properties": {
          "dailyActiveUsers": {
            "type": "integer",
            "description": "Daily active users"
          },
          "weeklyActiveUsers": {
            "type": "integer",
            "description": "Weekly active users"
          },
          "monthlyActiveUsers": {
            "type": "integer",
            "description": "Monthly active users"
          },
          "totalTrades": {
            "type": "integer",
            "description": "Total trades in period"
          },
          "averageTradeSize": {
            "type": "number",
            "description": "Average trade size"
          },
          "topTradedAssets": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "symbol": {
                  "type": "string"
                },
                "tradeCount": {
                  "type": "integer"
                },
                "volume": {
                  "type": "number"
                }
              }
            }
          }
        }
      }
    },
    "parameters": {
      "SymbolParam": {
        "name": "symbol",
        "in": "path",
        "required": true,
        "schema": {
          "type": "string"
        },
        "description": "Trading symbol (e.g., AAPL, BTC/USD)"
      },
      "UserIdParam": {
        "name": "userId",
        "in": "path",
        "required": true,
        "schema": {
          "type": "integer"
        },
        "description": "User ID"
      },
      "LimitQuery": {
        "name": "limit",
        "in": "query",
        "schema": {
          "type": "integer",
          "default": 100,
          "maximum": 1000
        },
        "description": "Maximum number of results to return"
      },
      "StartDateQuery": {
        "name": "startDate",
        "in": "query",
        "schema": {
          "type": "string",
          "format": "date"
        },
        "description": "Start date for filtering (ISO 8601 format)"
      },
      "EndDateQuery": {
        "name": "endDate",
        "in": "query",
        "schema": {
          "type": "string",
          "format": "date"
        },
        "description": "End date for filtering (ISO 8601 format)"
      }
    },
    "responses": {
      "UnauthorizedError": {
        "description": "Authentication required",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/Error"
            },
            "example": {
              "error": "Authentication required"
            }
          }
        }
      },
      "ForbiddenError": {
        "description": "Insufficient permissions",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/Error"
            },
            "example": {
              "error": "Admin access required"
            }
          }
        }
      },
      "RateLimitError": {
        "description": "Rate limit exceeded",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/Error"
            },
            "example": {
              "error": "Too many requests, please try again later."
            }
          }
        }
      },
      "ValidationError": {
        "description": "Request validation failed",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/Error"
            },
            "example": {
              "error": "Invalid email address"
            }
          }
        }
      }
    }
  },
  "paths": {
    "/auth/register": {
      "post": {
        "tags": ["Authentication"],
        "summary": "Register a new user",
        "description": "Create a new user account. An email verification link will be sent to the provided email address.",
        "operationId": "registerUser",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RegisterRequest"
              },
              "example": {
                "email": "user@example.com",
                "password": "securepassword123",
                "firstName": "John",
                "lastName": "Doe"
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "User registered successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "User registered successfully. Please check your email to verify your account."
                    },
                    "user": {
                      "$ref": "#/components/schemas/User"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/ValidationError"
          },
          "429": {
            "$ref": "#/components/responses/RateLimitError"
          },
          "500": {
            "$ref": "#/components/responses/Error"
          }
        }
      }
    },
    "/auth/login": {
      "post": {
        "tags": ["Authentication"],
        "summary": "User login",
        "description": "Authenticate user credentials and return JWT tokens.",
        "operationId": "loginUser",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginRequest"
              },
              "example": {
                "email": "user@example.com",
                "password": "securepassword123"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Login successful",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LoginResponse"
                }
              }
            }
          },
          "401": {
            "description": "Invalid credentials",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "error": "Invalid credentials"
                }
              }
            }
          },
          "429": {
            "$ref": "#/components/responses/RateLimitError"
          },
          "500": {
            "$ref": "#/components/responses/Error"
          }
        }
      }
    },
    "/auth/refresh-token": {
      "post": {
        "tags": ["Authentication"],
        "summary": "Refresh access token",
        "description": "Generate a new access token using a valid refresh token.",
        "operationId": "refreshToken",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RefreshTokenRequest"
              },
              "example": {
                "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Token refreshed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AuthTokens"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "500": {
            "$ref": "#/components/responses/Error"
          }
        }
      }
    },
    "/auth/logout": {
      "post": {
        "tags": ["Authentication"],
        "summary": "User logout",
        "description": "Revoke the refresh token and log out the user.",
        "operationId": "logoutUser",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "refreshToken": {
                    "type": "string",
                    "description": "Refresh token to revoke"
                  }
                }
              },
              "example": {
                "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Logged out successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Logged out successfully"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "500": {
            "$ref": "#/components/responses/Error"
          }
        }
      }
    },
    "/auth/change-password": {
      "post": {
        "tags": ["Authentication"],
        "summary": "Change password",
        "description": "Change the authenticated user's password.",
        "operationId": "changePassword",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChangePasswordRequest"
              },
              "example": {
                "currentPassword": "oldpassword123",
                "newPassword": "newsecurepassword123"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Password changed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Password changed successfully"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/ValidationError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "500": {
            "$ref": "#/components/responses/Error"
          }
        }
      }
    },
    "/auth/profile": {
      "get": {
        "tags": ["Authentication"],
        "summary": "Get user profile",
        "description": "Get the authenticated user's profile information.",
        "operationId": "getProfile",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Profile retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "user": {
                      "$ref": "#/components/schemas/User"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "500": {
            "$ref": "#/components/responses/Error"
          }
        }
      }
    },
    "/auth/verify-email/{token}": {
      "get": {
        "tags": ["Authentication"],
        "summary": "Verify email address",
        "description": "Verify user email address using the verification token sent via email.",
        "operationId": "verifyEmail",
        "parameters": [
          {
            "name": "token",
            "in": "path",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Email verification token"
          }
        ],
        "responses": {
          "200": {
            "description": "Email verified successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Email verified successfully"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid or expired token",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "error": "Invalid or expired verification token"
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/Error"
          }
        }
      }
    },
    "/trade/market": {
      "post": {
        "tags": ["Trading"],
        "summary": "Place market order",
        "description": "Place a market order to buy or sell an asset at the current market price.",
        "operationId": "placeMarketOrder",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MarketOrderRequest"
              },
              "example": {
                "symbol": "AAPL",
                "side": "buy",
                "quantity": 10
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Order placed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Market order placed successfully"
                    },
                    "order": {
                      "$ref": "#/components/schemas/Order"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/ValidationError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "429": {
            "$ref": "#/components/responses/RateLimitError"
          },
          "500": {
            "$ref": "#/components/responses/Error"
          }
        }
      }
    },
    "/trade/limit": {
      "post": {
        "tags": ["Trading"],
        "summary": "Place limit order",
        "description": "Place a limit order to buy or sell an asset at a specific price or better.",
        "operationId": "placeLimitOrder",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LimitOrderRequest"
              },
              "example": {
                "symbol": "AAPL",
                "side": "buy",
                "quantity": 10,
                "limitPrice": 150.0
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Order placed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Limit order placed successfully"
                    },
                    "order": {
                      "$ref": "#/components/schemas/Order"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/ValidationError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "429": {
            "$ref": "#/components/responses/RateLimitError"
          },
          "500": {
            "$ref": "#/components/responses/Error"
          }
        }
      }
    },
    "/trade/stop-loss": {
      "post": {
        "tags": ["Trading"],
        "summary": "Set stop loss",
        "description": "Set a stop loss order for an existing position.",
        "operationId": "setStopLoss",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/StopLossRequest"
              },
              "example": {
                "orderId": "order_123",
                "stopPrice": 140.0
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Stop loss set successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Stop loss set successfully"
                    },
                    "order": {
                      "$ref": "#/components/schemas/Order"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/ValidationError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "429": {
            "$ref": "#/components/responses/RateLimitError"
          },
          "500": {
            "$ref": "#/components/responses/Error"
          }
        }
      }
    },
    "/trade/take-profit": {
      "post": {
        "tags": ["Trading"],
        "summary": "Set take profit",
        "description": "Set a take profit order for an existing position.",
        "operationId": "setTakeProfit",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TakeProfitRequest"
              },
              "example": {
                "orderId": "order_123",
                "takeProfitPrice": 160.0
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Take profit set successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Take profit set successfully"
                    },
                    "order": {
                      "$ref": "#/components/schemas/Order"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/ValidationError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "429": {
            "$ref": "#/components/responses/RateLimitError"
          },
          "500": {
            "$ref": "#/components/responses/Error"
          }
        }
      }
    },
    "/trade/orders": {
      "get": {
        "tags": ["Trading"],
        "summary": "Get user orders",
        "description": "Retrieve all orders for the authenticated user.",
        "operationId": "getOrders",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/LimitQuery"
          },
          {
            "name": "status",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": ["pending", "filled", "cancelled", "rejected"]
            },
            "description": "Filter orders by status"
          }
        ],
        "responses": {
          "200": {
            "description": "Orders retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "orders": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Order"
                      }
                    },
                    "total": {
                      "type": "integer",
                      "description": "Total number of orders"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "500": {
            "$ref": "#/components/responses/Error"
          }
        }
      }
    },
    "/trade/positions": {
      "get": {
        "tags": ["Trading"],
        "summary": "Get user positions",
        "description": "Retrieve all current positions for the authenticated user.",
        "operationId": "getPositions",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Positions retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "positions": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/Position"
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "500": {
            "$ref": "#/components/responses/Error"
          }
        }
      }
    },
    "/trade/portfolio": {
      "get": {
        "tags": ["Portfolio"],
        "summary": "Get portfolio summary",
        "description": "Retrieve the authenticated user's portfolio summary including positions and balances.",
        "operationId": "getPortfolio",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Portfolio retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Portfolio"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "500": {
            "$ref": "#/components/responses/Error"
          }
        }
      }
    },
    "/trade/portfolio/overview": {
      "get": {
        "tags": ["Portfolio"],
        "summary": "Get portfolio overview",
        "description": "Retrieve detailed portfolio overview with performance metrics.",
        "operationId": "getPortfolioOverview",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Portfolio overview retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PortfolioOverview"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "500": {
            "$ref": "#/components/responses/Error"
          }
        }
      }
    },
    "/trade/portfolio/history": {
      "get": {
        "tags": ["Portfolio"],
        "summary": "Get portfolio history",
        "description": "Retrieve historical portfolio performance data.",
        "operationId": "getPortfolioHistory",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/LimitQuery"
          },
          {
            "$ref": "#/components/parameters/StartDateQuery"
          },
          {
            "$ref": "#/components/parameters/EndDateQuery"
          }
        ],
        "responses": {
          "200": {
            "description": "Portfolio history retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "date": {
                        "type": "string",
                        "format": "date"
                      },
                      "value": {
                        "type": "number",
                        "description": "Portfolio value on that date"
                      },
                      "pnl": {
                        "type": "number",
                        "description": "Profit/loss on that date"
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "500": {
            "$ref": "#/components/responses/Error"
          }
        }
      }
    },
    "/market-data": {
      "get": {
        "tags": ["Market Data"],
        "summary": "Get all market data",
        "description": "Retrieve current market data for all available symbols.",
        "operationId": "getAllMarketData",
        "responses": {
          "200": {
            "description": "Market data retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/MarketData"
                  }
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/Error"
          }
        }
      }
    },
    "/market-data/{symbol}": {
      "get": {
        "tags": ["Market Data"],
        "summary": "Get market data for symbol",
        "description": "Retrieve current market data for a specific symbol.",
        "operationId": "getMarketData",
        "parameters": [
          {
            "$ref": "#/components/parameters/SymbolParam"
          }
        ],
        "responses": {
          "200": {
            "description": "Market data retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/MarketData"
                }
              }
            }
          },
          "404": {
            "description": "Market data not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "error": "Market data not found"
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/Error"
          }
        }
      }
    },
    "/market-data/{symbol}/history": {
      "get": {
        "tags": ["Market Data"],
        "summary": "Get historical market data",
        "description": "Retrieve historical market data for a specific symbol.",
        "operationId": "getHistoricalData",
        "parameters": [
          {
            "$ref": "#/components/parameters/SymbolParam"
          },
          {
            "$ref": "#/components/parameters/LimitQuery"
          },
          {
            "$ref": "#/components/parameters/StartDateQuery"
          },
          {
            "$ref": "#/components/parameters/EndDateQuery"
          }
        ],
        "responses": {
          "200": {
            "description": "Historical data retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/HistoricalData"
                }
              }
            }
          },
          "404": {
            "description": "Symbol not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "error": "Market data not found"
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/Error"
          }
        }
      }
    },
    "/admin/users": {
      "get": {
        "tags": ["Admin"],
        "summary": "Get all users",
        "description": "Retrieve a list of all users (admin only).",
        "operationId": "getUsers",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 1,
              "minimum": 1
            },
            "description": "Page number"
          },
          {
            "name": "limit",
            "in": "query",
            "schema": {
              "type": "integer",
              "default": 50,
              "maximum": 100
            },
            "description": "Items per page"
          }
        ],
        "responses": {
          "200": {
            "description": "Users retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "users": {
                      "type": "array",
                      "items": {
                        "$ref": "#/components/schemas/AdminUser"
                      }
                    },
                    "total": {
                      "type": "integer",
                      "description": "Total number of users"
                    },
                    "page": {
                      "type": "integer",
                      "description": "Current page"
                    },
                    "pages": {
                      "type": "integer",
                      "description": "Total number of pages"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "500": {
            "$ref": "#/components/responses/Error"
          }
        }
      }
    },
    "/admin/users/{userId}": {
      "get": {
        "tags": ["Admin"],
        "summary": "Get user details",
        "description": "Retrieve detailed information about a specific user (admin only).",
        "operationId": "getUserDetails",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/UserIdParam"
          }
        ],
        "responses": {
          "200": {
            "description": "User details retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/AdminUser"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "error": "User not found"
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/Error"
          }
        }
      }
    },
    "/admin/users/{userId}/reset-balance": {
      "post": {
        "tags": ["Admin"],
        "summary": "Reset user balance",
        "description": "Reset a user's account balance to a default value (admin only).",
        "operationId": "resetUserBalance",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/UserIdParam"
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "balance": {
                    "type": "number",
                    "default": 10000,
                    "description": "New balance amount"
                  }
                }
              },
              "example": {
                "balance": 10000
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Balance reset successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "User balance reset successfully"
                    },
                    "newBalance": {
                      "type": "number",
                      "example": 10000
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "error": "User not found"
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/Error"
          }
        }
      }
    },
    "/admin/users/{userId}/status": {
      "patch": {
        "tags": ["Admin"],
        "summary": "Toggle user status",
        "description": "Activate or deactivate a user account (admin only).",
        "operationId": "toggleUserStatus",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/UserIdParam"
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "isActive": {
                    "type": "boolean",
                    "description": "Whether to activate or deactivate the user"
                  }
                }
              },
              "example": {
                "isActive": false
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "User status updated successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "User status updated successfully"
                    },
                    "user": {
                      "$ref": "#/components/schemas/AdminUser"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "description": "User not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "error": "User not found"
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/Error"
          }
        }
      }
    },
    "/admin/assets": {
      "get": {
        "tags": ["Admin"],
        "summary": "Get tradable assets",
        "description": "Retrieve a list of all tradable assets (admin only).",
        "operationId": "getTradableAssets",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Assets retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/TradableAsset"
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "500": {
            "$ref": "#/components/responses/Error"
          }
        }
      },
      "post": {
        "tags": ["Admin"],
        "summary": "Add tradable asset",
        "description": "Add a new asset to the list of tradable assets (admin only).",
        "operationId": "addTradableAsset",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TradableAsset"
              },
              "example": {
                "symbol": "TSLA",
                "name": "Tesla Inc.",
                "type": "stock",
                "isActive": true,
                "minOrderSize": 0.01,
                "maxOrderSize": 1000
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Asset added successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Asset added successfully"
                    },
                    "asset": {
                      "$ref": "#/components/schemas/TradableAsset"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/ValidationError"
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "409": {
            "description": "Asset already exists",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "error": "Asset with this symbol already exists"
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/Error"
          }
        }
      }
    },
    "/admin/assets/{symbol}": {
      "delete": {
        "tags": ["Admin"],
        "summary": "Remove tradable asset",
        "description": "Remove an asset from the list of tradable assets (admin only).",
        "operationId": "removeTradableAsset",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "$ref": "#/components/parameters/SymbolParam"
          }
        ],
        "responses": {
          "200": {
            "description": "Asset removed successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Asset removed successfully"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "404": {
            "description": "Asset not found",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Error"
                },
                "example": {
                  "error": "Asset not found"
                }
              }
            }
          },
          "500": {
            "$ref": "#/components/responses/Error"
          }
        }
      }
    },
    "/admin/metrics": {
      "get": {
        "tags": ["Admin"],
        "summary": "Get system metrics",
        "description": "Retrieve system performance metrics (admin only).",
        "operationId": "getSystemMetrics",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Metrics retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/SystemMetrics"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "500": {
            "$ref": "#/components/responses/Error"
          }
        }
      }
    },
    "/admin/reports/usage": {
      "get": {
        "tags": ["Admin"],
        "summary": "Get platform usage stats",
        "description": "Retrieve platform usage statistics and analytics (admin only).",
        "operationId": "getPlatformUsageStats",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "name": "period",
            "in": "query",
            "schema": {
              "type": "string",
              "enum": ["day", "week", "month"],
              "default": "week"
            },
            "description": "Time period for statistics"
          }
        ],
        "responses": {
          "200": {
            "description": "Usage stats retrieved successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/UsageStats"
                }
              }
            }
          },
          "401": {
            "$ref": "#/components/responses/UnauthorizedError"
          },
          "403": {
            "$ref": "#/components/responses/ForbiddenError"
          },
          "500": {
            "$ref": "#/components/responses/Error"
          }
        }
      }
    }
  },
  "tags": [
    {
      "name": "Authentication",
      "description": "User authentication and authorization endpoints"
    },
    {
      "name": "Trading",
      "description": "Order placement and management endpoints"
    },
    {
      "name": "Portfolio",
      "description": "Portfolio management and performance tracking"
    },
    {
      "name": "Market Data",
      "description": "Real-time and historical market data"
    },
    {
      "name": "Admin",
      "description": "Administrative functions and system management"
    }
  ],
  "externalDocs": {
    "description": "Find out more about XPro Trading Platform",
    "url": "https://xprotrading.com/docs"
  }
}
